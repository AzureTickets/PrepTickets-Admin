<div ng-controller="filterController" ui-if="_fields && _model || false"
	ng-cloak=""
	ng-init="fields = _fields; modelName = _model; filterModel = model.getInstanceOf(modelName)">
	<script type="text/ng-template" id="formFilter.html">
			<div class="modal-header">
				<button type="button" ng-click="filterDialog.open = false"
					class="close"><i class="fa fa-times-circle"></i></button>
				<h3>
					<p class="text-info">{{ 'Common.Text_AdvancedSearch' | t }}</p>
				</h3>
			</div>
			<div class="modal-body">
				<form name="advancedFilterForm" ng-submit="search()"
					ui-if="filterModel && filterModel != null || false"
					class="form-horizontal">
					<div class="control-group" ng-repeat="f in fields">
						<label class="control-label">{{ f | t:normalize }}</label>
						<div class="controls">
							<atfilter at-model="filterModel" at-field="f" />
						</div>
					</div>
					<div class="clearfix pull-right">
						<button type="submit" class="btn">{{ 'Common.Text_Search' | t }}</button>
					</div>
				</form>
			</div>
			<div class="modal-footer"></div>
	</script>
	<button class="btn btn-primary btn-mini"
		ng-click="filterDialog.open = true">{{'Common.Text_AdvancedSearch'
		| t}}</button>
</div>

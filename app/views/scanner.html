<div class="atPanel" ui-if="DomainProfile && DomainProfile.Key || false"
	ng-controller="scannerController" ng-cloak
	ng-init="media.loadImages(this);">
	<script type="text/ng-template" id="formScanDevice.html">
			<div class="modal-header">
				<button type="button" ng-click="wizardScanDevice.open = false"
					class="close">&times;</button>
				<h3>
					<p class="text-info">{{ 'Scanner.Text_CodeDevicePopup' | t}}</p>
				</h3>
			</div>
			<div class="modal-body">
				<!-- messages -->
				<div ng-switch="wizardScanDevice.currentStep">
					<div class="alert alert-info" ng-switch-when="1">
						<strong>{{ 'Scanner.Text_ScannerInformation' | t }}</strong>
					</div>
					<div class="alert alert-info" ng-switch-when="2">
						<strong>{{ 'Scanner.Text_DeviceInformation' | t }}</strong>
					</div>
					<div class="alert alert-info" ng-switch-when="3">
						<strong>{{ 'Scanner.Text_EventInformation' | t }}</strong>
					</div>
					<div class="alert alert-info" ng-switch-when="4">
						<strong>{{ 'Common.Text_ImageSelect' | t }}</strong>
					</div>
					<div class="alert alert-info" ng-switch-when="5">
						<strong>{{ 'Common.Text_Confirm' | t }}</strong>
					</div>
				</div>
				<div class="alert alert-success"
					ui-if="wizardScanDevice.saved && wizardScanDevice.finished">
					<strong>{{ 'Common.Text_Congrats' | t }}</strong> {{
					'Common.Text_WizardComplete' | t }}
				</div>
				<!-- form -->
				<ng-form ui-if="ScanDevice" name="atScanDevice" ng-submit="save()">
				<form ui-if="wizardScanDevice.currentStep == 1" name="atScanDevice1"
					ng-submit="wizardScanDevice.next('atScanDevice1')">
					<dl class="clearfix">
						<dd>
							<atfield at-required class="input-xxlarge" ng-model="ScanDevice.Name"
								label="'Common.Text_Name' | t" />
						</dd>
						<dd>
							<atfield class="input-xxlarge" ng-model="ScanDevice.Brief"
								label="'Common.Text_BriefDescription' | t" rows="5" />
						</dd>
						<dd>
							<img ng-src="https://stage.revvly.com/scanner.svc/{{ScanDevice.StoreKey}}/config/{{ScanDevice.Key}}" />
						</dd>
						<dd>
							<input type="submit" class="btn btn-primary clear"
								value="{{
							'Common.Text_Next' | t }}" />
						</dd>
					</dl>
				</form>
				<form ui-if="wizardScanDevice.currentStep == 2" name="atScanDevice2"
					ng-submit="wizardScanDevice.next('atScanDevice2')">
					<dl class="clearfix">
						<dd>
							<atfield at-copy-of="DeviceInfo" at-required class="input-xxlarge" ng-model="ScanDevice.DeviceInfo.Name"
								label="'Scanner.Text_DeviceName' | t" />
						</dd>
						<dd>
							<atfield at-copy-of="DeviceInfo" at-required class="input-xxlarge" ng-model="ScanDevice.DeviceInfo.UniqueID"
								label="'Scanner.Text_UniqueID' | t" />
						</dd>
						<dd>
							<atfield at-copy-of="DeviceInfo" at-required class="input-xxlarge" ng-model="ScanDevice.DeviceInfo.Hardware"
								label="'Scanner.Text_Hardware' | t" />
						</dd>
						<dd>
							<atfield at-copy-of="DeviceInfo" at-required class="input-xxlarge" ng-model="ScanDevice.DeviceInfo.OS"
								label="'Scanner.Text_OSVersion' | t" />
						</dd>
						<dd>
							<input type="submit" class="btn btn-primary clear"
								value="{{
							'Common.Text_Next' | t }}" />
						</dd>
					</dl>
				</form>
				<form ng-show="wizardScanDevice.currentStep == 3" name="atScanDevice3"
					ng-submit="wizardScanDevice.next('atScanDevice3')">
					<dl class="clearfix">
						<dd>
							<label>{{ 'Common.Text_Events' | t}}</label>
							<!-- @todo make this part of the atfield directive -->
							<input type="text" ui-if="ScanDevice._tmpEvents"
								data-placeholder="{{ 'Common.Text_ChooseOption' | t}}"
								ui-select2="optsSelEvents" ng-model="ScanDevice.tmpEvents"
								name="ScanDevice_tmpEvents" ng-init="evEvents()" />
						</dd>
						<dd class="clear"><br /></dd>
						<dd class="clear">
							<atfield class="input-small" ng-model="ScanDevice.Active" />
						</dd>
						<dd class="clear"><br /></dd>
						<dd class="pull-left">
							<a ng-show="wizardScanDevice.currentStep>1"
								ng-click="wizardScanDevice.currentStep = wizardScanDevice.currentStep-1"
								class="btn btn-primary clear">{{ 'Common.Text_Back' | t }}</a>
						</dd>
						<dd class="pull-left">
							<input type="submit" class="btn btn-primary clear"
								value="{{
		 							'Common.Text_Next' | t }}" />
						</dd>
					</dl>
				</form>
				<form ui-if="images && images.length > 0 || false" ng-show="wizardScanDevice.currentStep == 4" name="atScanDevice4"
					ng-submit="wizardScanDevice.next('atScanDevice4')">
					
					<dl class="clearfix">
					  <!-- Media selector -->
				    <dd class="media-selector" ng-class="{'atStoreImgSel': images.length > 0}" ng-controller="mediaController" ng-init="init(); modelName='ScanDevice'" ng-include src="'views/elements/store/mediaSelector.html'"></dd>
						
						<dd class="pull-left">
							<a ng-show="wizardScanDevice.currentStep>1"
								ng-click="wizardScanDevice.currentStep = wizardScanDevice.currentStep-1"
								class="btn btn-primary clear">{{ 'Common.Text_Back' | t }}</a>
						</dd>
						<dd class="pull-left">
							<input type="submit" class="btn btn-primary clear"
								value="{{
		 							'Common.Text_Next' | t }}" />
						</dd>
					</dl>
				</form>
				<form ui-if="wizardScanDevice.currentStep == 5 && !wizardScanDevice.saved"
					name="atScanDevice5" ng-submit="wizardScanDevice.next('atScanDevice5', true)">
					<dl>
						<dd class="clear row-fluid">
							<!-- scanDevice details -->
							<atmodel ui-if="ScanDevice && ScanDevice._tmpEvents" ng-model="ScanDevice"
								at-hide-props="DateCreated,DateModified,StoreKey"></atmodel>
						</dd>
						<dd class="pull-left">
							<a ng-show="wizardScanDevice.currentStep>1"
								ng-click="wizardScanDevice.currentStep = wizardScanDevice.currentStep-1"
								class="btn btn-primary clear">{{ 'Common.Text_Back' | t }}</a>
						</dd>
						<dd class="pull-left">
							<input type="submit" class="btn btn-success clear"
								value="{{
		 							'Common.Text_Save' | t }}" />
						</dd>
					</dl>
				</form>
				<dl ui-if="wizardScanDevice.finished" class="clearfix">
					<dd class="pull-left">
						<a ng-show="wizardScanDevice.currentStep>1 && wizardScanDevice.saved"
							ng-click="wizardScanDevice.currentStep = wizardScanDevice.currentStep-2; wizardScanDevice.finished = false; wizardScanDevice.saved = false"
							class="btn btn-primary clear">{{ 'Common.Text_Back' | t }}</a>
					</dd>
					<dd class="pull-left">
						<a ng-show="wizardScanDevice.currentStep>1 && wizardScanDevice.saved"
							ng-click="wizardScanDevice.open = false"
							class="btn btn-primary clear">{{ 'Common.Text_Close' | t }}</a>
					</dd>
				</dl>
				</ng-form>
			</div>
			<div class="modal-footer"></div>
	</script>
	<!-- top menu -->
	<div ng-include src="'views/elements/error.html'"></div>
	<!-- scanDevice info -->
	<div ui-if="Store && Store.Key || false" class="row-fluid">
		<!--<p class="lead pull-left">{{ 'Common.Text_ScanDeviceMenu_ScanDevices' | t}}</p>-->
		<h3 class="pull-left">{{ 'Scanner.Text_Scanners' | t}}</h3>
		<div class="btn-group pull-right">
			<a class="btn btn-info" ng-click="create()"> <i class="fa fa-plus"></i>&nbsp;{{
				'Scanner.Text_Create' | t }}
			</a>
		</div>
		<div class="clear"></div>
		<div onload="init()" ng-include src="'views/scannerList.html'"></div>
	</div>
</div>

<div ng-include src="'views/elements/error.html'"></div>
<div class="clear row-fluid list" ng-controller="adminController"
	ng-init="getPendingAccessRequests()">
	<div class="widget wviolet">
		<div class="widget-head">
			<div class="pull-left">{{ 'Common.Text_Pending_Approvals' | t
				}}</div>
			<div class="clear"></div>
		</div>
		<div ng-show="approvals.length == 0" class="alert alert-info">{{
			'Common.Text_ApprovalEmpty' | t }}</div>
		<div class="widget-content" ng-show="approvals.length > 0">
			<table class="table  table-bordered ">
				<thead>
					<tr>
						<th>#</th>
						<th><a href=""
							ng-click="paginationApproval.sort('DateCreated')">{{
								'Common.Text_Date' | t }}</a></th>
						<th><a href=""
							ng-click="paginationApproval.sort('RequestedItem.Type')">{{
								'Common.Text_Type' | t }}</a></th>
						<th><a href=""
							ng-click="paginationApproval.sort('RequestedItem.Name')">{{
								'Common.Text_Details' | t }}</a></th>
						<th><a href=""
							ng-click="paginationApproval.sort('RequestedByKey')">{{
								'Common.Text_Profile' | t }}</a> {{'Common.Text_ID' | t}}</th>
						<th ui-if="auth.isAdministrator()">{{ 'Common.Text_Control' |
							t }}</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="approval in approvals">
						<td>{{ $index+1 }}</td>
						<td><span class="label label-inverse"> {{
								approval.DateCreated | date:'MM/dd/yyyy @ h:mma' }}</span></td>
						<td>{{approval.RequestedItem.Type | t:true}}</td>
						<td>{{approval.RequestedItem.Name || (RequestedItem |
							address) }}</td>
						<td>{{approval.RequestedByKey}}</td>
						<td ui-if="auth.isAdministrator()">
							<div class="btn-group pull-right">
								<button class="btn btn-mini btn-success"
									ng-click="confirmApproval(approval)">{{
									'Common.Text_Approve' | t }}</button>
								<button ng-click="rejectApproval(approval)"
									class="btn btn-mini btn-danger">{{
									'Common.Text_Reject' | t }}</button>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
			<div class="paginationDiv">
				<ng-pagination ui-if="approvals && approvals.length > 0"
					page-size="paginationApproval.pageSize"
					predicates="paginationApproval.predicates"
					page-items="paginationApproval.pageItems"
					text-filter="paginationApproval.textFilter"
					sort="paginationApproval.sort" results="paginationApproval.results"
					current-page-index="paginationApproval.currentPageIndex"
					number-of-pages="paginationApproval.numberOfPages" data="approvals"></ng-pagination>
				<p class="text-center" ng-show="paginationApproval.results.length"
					ng-cloak>{{'Common.Text_CurrentPage' | t}}:
					{{paginationApproval.currentPageIndex + 1}} -
					{{'Common.Text_ItemsPerPage' | t}}: {{paginationApproval.pageSize}}
					- {{'Common.Text_TotalPages' | t}}:
					{{paginationApproval.numberOfPages}} - {{'Common.Text_TotalItems' |
					t}}: {{paginationApproval.results.length}}</p>
			</div>
		</div>
	</div>
</div>